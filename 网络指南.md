# 网络指南

## HTTP

### 常见错误码
* 1xx

1xx 类状态码属于提示信息，是协议处理中的⼀种中间状态，实际⽤到的⽐较少。

* 2xx

2xx 类状态码表示服务器成功处理了客户端的请求，也是我们最愿意看到的状态。「200 OK」是最常⻅的成功状态码，表示⼀切正常。如果是⾮HEAD请求，服务器返回的响应头都会有 body 数据。

「204 No Content」也是常⻅的成功状态码，与 200 OK 基本相同，但响应头没有 body 数据。

「206 Partial Content」是应⽤于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，⽽是其中的⼀部分，也是服务器处理成功的状态。

* 3xx

3xx 类状态码表示客户端请求的资源发送了变动，需要客户端⽤新的URL重新发送请求获取资源，也就是重定向。

「301 Moved Permanently」表示永久重定向，说明请求的资源已经不存在了，需改⽤新的 URL 再次访问。

「302 Found」表示临时重定向，说明请求的资源还在，但暂时需要⽤另⼀个 URL 来访问。
301 和 302 都会在响应头⾥使⽤字段Location，指明后续要跳转的URL，浏览器会⾃动重定向新的 URL。

「304 Not Modified」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲⽂件，也称缓存重定向，⽤于缓存控制。

* 4xx

4xx 类状态码表示客户端发送的报⽂有误，服务器⽆法处理，也就是错误码的含义。

「400 Bad Request」表示客户端请求的报⽂有错误，但只是个笼统的错误。

「403 Forbidden」表示服务器禁⽌访问资源，并不是客户端的请求出错。

「404 Not Found」表示请求的资源在服务器上不存在或未找到，所以⽆法提供给客户端。

* 5xx

5xx 类状态码表示客户端请求报⽂正确，但是服务器处理时内部发⽣了错误，属于服务器端的错误码。

「500 Internal ServerError」与400类型，是个笼统通⽤的错误码，服务器发⽣了什么错误，我们并不知道。

「501 Not Implemented」表示客户端请求的功能还不⽀持，类似“即将开业，敬请期待”的意思。

「502 Bad Gateway」通常是服务器作为⽹关或代理时返回的错误码，表示服务器⾃身⼯作正常，访问后端服务器发⽣了错误。

「503 Service Unavailable」表示服务器当前很忙，暂时⽆法响应服务器，类似“⽹络服务正忙，请稍后重试”的意思。

### 常见字段
* Host：服务器域名
* Content-Length：回应的数据长度
* Connection：客户端要求服务器使用TCP持久连接
* Content-Type：⽤于服务器回应时，告诉客户端，本次数据是什么格式
* Accept：客户端请求的时候，可以使⽤ Accept 字段声明⾃⼰可以接受哪些数据格式
* Content-Encoding：说明数据的压缩⽅法。表示服务器返回的数据使⽤了什么压缩格式
* Accept-Encoding：客户端在请求时，说明⾃⼰可以接受哪些压缩⽅法

### GET与POST





## TCP

### 为什么需要TCP，TCP工作在哪一层
IP 层是「不可靠」的，它不保证⽹络包的交付、不保证⽹络包的按序交付、也不保证⽹络包中的数据的完整性。

如果需要保障⽹络数据包的可靠性，那么就需要由上层（传输层）的 TCP 协议来负责。
因为 TCP 是⼀个⼯作在传输层的可靠数据传输的服务，它能确保接收端接收的⽹络包是⽆损坏、⽆间隔、⾮冗余和按序的。

建议一个tcp连接，需要客户端与服务器端达成三个信息的共识
* socket：由IP地址和端口号组成
* 序列号：用来解决乱序问题
* 窗口大小：用来做流量控制

### 三次握手
* 第三次握手可以携带数据，前两次握手是不可以携带数据的。

* 查看tcp连接状态
```
netstat -anpt
```
* 为什么是三次握手？
    * 阻止重复历史连接的初始化
    * 同步双方的初始序列号
    * 避免资源浪费

不使⽤「两次握⼿」和「四次握⼿」的原因：

「两次握⼿」：⽆法防⽌历史连接的建⽴，会造成双⽅资源的浪费，也⽆法可靠的同步双⽅序列号；
「四次握⼿」：三次握⼿就已经理论上最少可靠连接建⽴，所以不需要使⽤更多的通信次数。
